<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Clarity Engine™ by Amber</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

  :root {
    --base: #F7F6F4;
    --warm-top: #FCE9EC;
    --text: #3C3C3C;
    --accent: #FF9AA2;
    --gray-line: #EAE6E7;
  }

  body {
    font-family: "Inter", sans-serif;
    background: radial-gradient(circle at top center, var(--warm-top) 0%, var(--base) 70%);
    color: var(--text);
    margin: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  header {
    width: 100%;
    max-width: 1200px;
    text-align: center;
    padding: 3.5rem 0 1.25rem;
    font-weight: 500;
    letter-spacing: 0.08em;
    font-size: 1.2rem;
    border-bottom: 1px solid var(--gray-line);
  }

  #workspace {
    flex: 1;
    width: 100%;
    max-width: 1200px;
    padding: 4rem 2rem 8rem;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #chat {
    width: 100%;
    max-width: 800px;
    background: #fff;
    border: 1px solid rgba(0,0,0,0.05);
    border-radius: 18px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.04);
    padding: 2rem 3rem;
    box-sizing: border-box;
    overflow-y: auto;
  }

  .message {
    line-height: 1.8;
    margin-bottom: 1.25rem;
    opacity: 0;
    animation: fadeIn 0.4s ease forwards;
  }

  .engine {
    font-weight: 700;
    color: var(--accent);
  }

  .user {
    font-weight: 400;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Floating Input */
  #inputArea {
    position: fixed;
    bottom: 2.5rem;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 700px;
    background: #fff;
    border: 1px solid var(--gray-line);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    border-radius: 14px;
    display: flex;
    justify-content: center;
  }

  #userInput {
    width: 100%;
    font-family: inherit;
    font-size: 1rem;
    padding: 1rem 1.5rem;
    border: none;
    outline: none;
    border-radius: 14px;
  }

  #userInput::placeholder {
    color: #A8A6A5;
  }

  #userInput:focus {
    box-shadow: 0 0 0 3px rgba(255,154,162,0.25);
  }

  #typing {
    display: none;
    font-size: 1.4rem;
    color: var(--accent);
    letter-spacing: 2px;
  }
</style>
</head>

<body>
  <header>Clarity Engine™ by Amber</header>

  <div id="workspace">
    <div id="chat"></div>
    <div id="typing">...</div>
  </div>

  <div id="inputArea">
    <input id="userInput" type="text" placeholder="Type with intention..." autocomplete="off" />
  </div>

<script>
const chat = document.getElementById('chat');
const input = document.getElementById('userInput');
const typing = document.getElementById('typing');
let step = 'reflect';

/* --- Core tone enforcement --- */
const voiceRules = {
  declarative:true,
  directNotHarsh:true,
  structured:true,
  calm:true
};

/* --- Input listener --- */
input.addEventListener('keydown',e=>{
  if(e.key==='Enter' && input.value.trim()!==''){
    const text=input.value.trim();
    appendMessage(text,'user');
    input.value='';
    engineRespond(text);
  }
});

function appendMessage(text,sender){
  const msg=document.createElement('div');
  msg.classList.add('message',sender);
  msg.innerText=text;
  chat.appendChild(msg);
  chat.scrollTop=chat.scrollHeight;
}

async function engineRespond(userText){
  showTyping(true);
  for(let i=0;i<3;i++){await pause(1000);}
  showTyping(false);
  const response=generateResponse(userText);
  appendMessage(response,'engine');
}

function showTyping(show){
  typing.style.display=show?'block':'none';
  chat.scrollTop=chat.scrollHeight;
}
function pause(ms){return new Promise(res=>setTimeout(res,ms));}

/* --- Invisible 4-step logic --- */
function generateResponse(text){
  let r='';
  if(step==='reflect'){r=reflectStage(text);step='organize';}
  else if(step==='organize'){r=organizeStage(text);step='decide';}
  else if(step==='decide'){r=decideStage(text);step='confirm';}
  else{r=confirmStage(text);step='reflect';}
  return r;
}

/* --- Declarative, structured tone --- */
function reflectStage(t){
return `You’re describing complexity around “${t}.”\n\nThis isn’t confusion — it’s clutter.\n\nLet’s separate what actually matters.`;
}

function organizeStage(t){
return `Structure:\n\n• Core issue → unclear hierarchy\n• Secondary friction → scattered focus\n\nWe’ll simplify next.`;
}

function decideStage(t){
return `Decision:\n\nFocus on one executable move within 30 minutes.\n\nThat’s the shift that restarts momentum.`;
}

function confirmStage(t){
return `Direction locked.\n\nExecute the move.\nThen stop.\n\nCome back when the next layer needs clarity.`;
}
</script>
</body>
</html>

